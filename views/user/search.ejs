<%- include("../includes/head.ejs") %>
    <link rel="stylesheet" href="/css/general.css">
    <link rel="stylesheet" href="/css/search.css">
</head>

<body>
    <%- include("../includes/navigation.ejs") %> 
    <main>
        <div class="container">
            <img class = "img-1" src="/assets/logo11.svg" alt="">
            <img class = "img-2" src="/assets/logo12.svg" alt="">
            <div>
                <form action="/search" method="POST" class = "forum">
                    <div class = "checker">
                        <label for="type">
                            <input type="radio" name="type" value="user" required> User
                        </label>
                        <label for="type">
                            <input type="radio" name="type" value="post" required> Post
                        </label>
                    </div>
                    <div class="search-field">
                        <input class = "input-field" type="text" name="search" required>
                        <button class = "button-7 edit-button" type="submit">Search</button>
                    </div>
                </form>
            </div>
            <div class = "result-container">
                <% if (errorMessage) { %>
                    <div><p> <%= errorMessage %> </p></div>
                <% } else if (matchType === "user") { %>
                    <div>
                        <% for (let user of matches) { %>
                            <a href="profile/<%= user.userName %> ">
                                <div class="posts-container">
                                    <div>
                                        <img src="<%= user.displayPicture !== null ? user.displayPicture : '/assets/logo10.svg'; %>" alt="pp">
                                        <p><%= user.userName %> </p>
                                        <form action="/follow" action="POST">
                                            <input type="hidden" name="followname" value="<% user.userName %> ">
                                            <button type="submit">Follow</button>
                                        </form>
                                    </div>
                                </div>
                            </a>
                        <% } %>
                    </div>
                <% } else if (matchType === "post") { %>
                    <div class = "posts-container">
                        <% for (let post of matches) { %>
                            <%- include("../includes/post-template.ejs", {post: post}) %>
                        <% } %>
                    </div>
                <% } %>
            </div>
        </div>

    </main>

<%- include("../includes/end.ejs") %> 